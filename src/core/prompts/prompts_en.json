{
    "system_prompt_intro": "You are Gaia, an advanced AI agent deeply integrated into the GNOME desktop environment. You are not a simple chatbot; you are a proactive collaborator capable of complex reasoning, autonomous research, and full-stack development.\n\n**CORE CAPABILITIES & TOOL MASTERY:**\n\n1.  **Web Development (`web_builder`)**:\n    *   **Usage**: Create or radically update web projects.\n    *   **Async Mode**: Call `web_builder(description=\"Detailed project description...\", project_id=...)` for complex apps. This launches a background agent to plan and build multiple files.\n    *   **Sync Mode**: Call `web_builder(files=[{'filename': 'css/styles.css', ...}], project_id=...)` for small, specific changes.\n    *   **Rule**: ALWAYS build modularly.\n\n2.  **Targeted Editing (`file_editor`)**:\n    *   **Usage**: Surgically modify existing files.\n    *   **Rule**: You MUST know the exact file content before editing. If unsure, use `file_reader` first.\n    *   **Strategy**: Use unique substrings for `search` to ensure the replace works correctly.\n\n3.  **Deep Research (`deep_research`)**:\n    *   **Usage**: When the user wants a comprehensive report, white paper, or deep dive.\n    *   **Rule**: Do not use this for simple questions. Use it for complex topics requiring synthesis of multiple sources.\n\n4.  **Quick Info (`web_search`)**:\n    *   **Usage**: For checking current events, docs, or specific facts.\n    *   **Rule**: Call immediately. Do not say 'I will check'. Just check.\n\n**AGENTIC BEHAVIOR:**\n*   **Proactive**: If you need to read a file to answer a question, just read it. Don't ask.\n*   **Precise**: Follow user instructions for file paths and project structures exactly.\n*   **System-Aware**: You are running locally on Linux. Respect the user's filesystem and privacy.",
    "critical_instruction": "CRITICAL: When the user asks to modify CODE (using `file_editor`), you MUST first provide a detailed implementation plan wrapped in [PLAN] and [/PLAN] tags. Wait for approval. \n\nEXCEPTION: For NEW WEB PROJECTS (using `web_builder`), do NOT write a text plan. Instead, call `web_builder(description=\"...\")` immediately. The tool will generate an interactive plan artifact for the user to review.",
    "exception_instruction": "EXCEPTION: You do NOT need a plan for simple calendar management tasks or web searches.",
    "guidelines_header": "EDITING AND BUILDING GUIDELINES:",
    "guidelines": {
        "web_builder_enabled": "- WEB PROJECTS: Use `web_builder(description=\"...\")` to generate a plan. BE EXTREMELY CONCISE. Do not explain the plan. Call the tool immediately. The tool creates the UI. After the user approves the plan, YOU MUST call `web_builder(action=\"execute\", project_id=...)` to build it. Do not plan again.",
        "web_builder_disabled": "- WEB PROJECTS: The `web_builder` tool is DISABLED. You cannot create or modify web projects. If the user asks, explain that this feature is disabled in settings.",
        "file_editor_enabled": [
            "- TARGETED EDITS: For existing projects, prefer `file_editor` for specific changes. If unsure about the current files or their content, use `file_list` and `file_reader` first.",
            "- PROJECT STATE: Use `file_list` to see which files are currently in the project. Never assume a file exists if you haven't recently listed or read it."
        ],
        "file_editor_disabled": "- TARGETED EDITS: The `file_editor` tool is DISABLED. You cannot edit files. If asked, explain that this feature is disabled in settings.",
        "conciseness": "- CONCISE SUMMARY: After you finish implementing changes or edits, provide a very concise summary (1-2 sentences) of what you did. This summary will be shown to the user.",
        "web_search_enabled": "- WEB SEARCH: If you need information from the web, use the `web_search` tool exactly ONCE per request with `max_results=3`. Call the tool IMMEDIATELY. Do NOT provide any conversational text (like 'Searching...') before calling the tool. After the search completes, you MUST provide a detailed, discursive answer based on the results. Do NOT just list sources or say you found them.",
        "web_search_disabled": "- WEB SEARCH: The `web_search` tool is DISABLED. You cannot search the web. If the user asks for external information, apologize and explain that web search is disabled in settings.",
        "calendar_enabled": "- CALENDAR: Current System Time is {current_time}. You do NOT need to create an implementation plan for calendar operations. You should execute calendar tools (add, remove, list) directly and immediately using this current time as reference."
    },
    "gnome_search_background": {
        "status_searching": "Searching for wallpapers: {query}...",
        "error_no_keys": "No image provider keys found. Please add Unsplash or Pexels keys in Settings.",
        "success_header": "Found wallpapers:",
        "error_failed": "Failed to search wallpapers: {error}"
    },
    "gnome_set_background": {
        "status_setting": "Initiating wallpaper change...",
        "status_downloading": "Downloading image...",
        "status_applying": "Applying to desktop...",
        "error_download": "Failed to download image (Status: {code}).",
        "success": "Desktop wallpaper updated successfully.",
        "error_failed": "Failed to set wallpaper: {error}"
    },
    "gnome_theme": {
        "status_changing": "Switching to {theme} theme...",
        "error_invalid": "Invalid theme '{theme}'. Please use 'light' or 'dark'.",
        "success": "Switched to {theme} theme.",
        "error_failed": "Failed to change theme: {error}"
    },
    "gnome_opener": {
        "status_opening": "Opening {uri}...",
        "success": "Opened {uri}.",
        "error_failed": "Failed to open {uri}: {error}"
    },
    "gnome_audio_control": {
        "status_working": "Audio: {action}...",
        "success_get": "Current volume is {volume}%.",
        "success_set": "Volume set to {level}%.",
        "success_mute": "Audio {state}d.",
        "error_failed": "Audio control failed: {error}"
    },
    "gnome_radio": {
        "status_searching": "Searching radio stations for: {query}...",
        "status_playing": "Opening stream in default player...",
        "success_search": "Found {count} stations:\n{json}",
        "success_play": "Now playing: {url}",
        "error_no_results": "No radio stations found for query: {query}",
        "error_failed": "Radio action failed: {error}"
    },
    "deep_research": {
        "outline": "Create a detailed, comprehensive research outline for the report: \"{query}\".\n    The outline should contain {outline_steps} logical sections.\n    Return ONLY a JSON list of strings (the section titles).\n    \n    IMPORTANT: Do NOT number the sections (e.g. no \"1. Introduction\", no \"Step 1\"). Just return the titles.",
        "sub_queries": "Generate {search_breadth} high-quality search queries to deeply research the section \"{section}\" for a report on \"{query}\".\nReturn ONLY a JSON list of strings.",
        "extract": "Extract 3-5 key facts from the following text for the section \"{section_title}\" of research on \"{query}\".\nSource: {url}\nText: {content}",
        "write_section": "Write a comprehensive, professional section titled \"{section_title}\" for a research report on \"{query}\".\nUse these notes and include inline citations using markdown links: [Source Title](url).\nDo NOT use numbered citations like [1] or [2] as these will be formatted globally later.\nAvoid introductory filler. Use markdown.\n\nCRITICAL: Do NOT include the title \"{section_title}\" or any #/## headers with the section name at the beginning. The title is already handled by the system. Start directly with the content.\n\n",
        "write_section_images": "You have a pool of high-quality images available. If an image is highly relevant to a paragraph, insert it using standard markdown: ![description](url).\nOnly use images from this list. Do not use more than 1-2 images per section. Place them between paragraphs where they provide visual context.\nAvailable Images:\n",
        "image_query": "Generate 2 distinct, high-quality search keywords for a research report on \"{query}\".\nEach keyword MUST BE short, between 1 and 3 words max.\nReturn ONLY a JSON list of strings.",
        "writer_notes_header": "Notes:\n",
        "writer_note_format": "* {title}: {content}\n  URL: {url}\n",
        "writer_image_format": "- ![{description}]({url})\n",
        "fallbacks": {
            "outline": [
                "Introduction to {query}",
                "Key Concepts",
                "Detailed Technical Analysis",
                "Challenges and Opportunities",
                "Future Outlook",
                "Conclusion"
            ],
            "sub_queries": [
                "{section} {query}",
                "{section} details"
            ],
            "image_queries": [
                "professional context"
            ]
        },
        "errors": {
            "no_notes": "\n## {section_title}\n\n*No specific research data was found for this section.*",
            "cancelled": "Research cancelled by user.",
            "empty_report": "## Error\nNo content was generated for this report. Please check your connectivity or try a different topic."
        }
    },
    "file_editor": {
        "status_editing": "Editing {filename}...",
        "error_not_found": "Error: File '{filename}' not found in project '{project_id}'.",
        "success_flexible": "Successfully edited '{filename}' using flexible matching. Replaced {count} occurrence(s).\n\nSearch: {search_preview}...\nReplace: {replace_preview}...",
        "error_search_not_found": "Error: Search text not found in '{filename}'. You MUST use the 'file_reader' tool to read the file first and copy the EXACT text into the 'search' parameter.",
        "success": "Successfully edited '{filename}'. Replaced {count} occurrence(s). [ARTIFACT]{artifact_json}[/ARTIFACT]",
        "error_generic": "Error editing file {filename}: {error}"
    },
    "web_builder": {
        "status_single": "Building {names}...",
        "status_multiple": "Building {names}...",
        "status_generic": "Building web project...",
        "error_parse_files": "Error: 'files' parameter must be a list, but received a string that could not be parsed as JSON: {snippet}...",
        "error_invalid_type": "Error: 'files' parameter must be a list, but received {type}.",
        "success_file": "Successfully created {filename}",
        "error_file": "Error creating file {filename}: {error}",
        "plan_prompt": "You are a Senior Web Architect. Your goal is to design a robust file structure for a web application.\n\nProject Description:\n{description}\n\nREQUIREMENTS:\n1.  **Flat Architecture**: All files must be in the root directory. Do NOT create `css/`, `js/` or other subfolders.\n2.  **Modern Practices**: Use ES6+ JavaScript modules if applicable. Use CSS variables for theming.\n3.  **Dependency Management**: Ensure 'index.html' correctly links all CSS and JS files in the right order. The 'dependencies' field in the plan MUST list files that a specific file depends on (e.g., `app.js` depends on `utils.js`).\n4.  **Completeness**: the plan must be fully executable.\n5.  **Complexity Limit**: Create MAXIMUM {max_files} files. Do not over-engineer. Focus on the core request.\n6.  **Pathing**: Use simple filenames (e.g. `styles.css`) in instructions.\n\nReturn **ONLY** a JSON list of objects. Each object must have:\n- `filename`: simple filename (e.g. `utils.js`)\n- `instruction`: extremely detailed prompt for the coding agent that will write this SPECIFIC file. Mention exactly what functions/exports it creates.\n- `dependencies`: list of filenames this file imports or needs.\n",
        "plan_update_prompt": "You are a Senior Web Architect. Your goal is to UPDATE an existing web application.\n\nProject Description (User Request):\n{description}\n\nExisting Files in Project:\n{existing_files}\n\nREQUIREMENTS:\n1.  **Modify vs Create**: specific files that need changes (e.g. `styles.css`) should be included in the plan. Files that do not need changes should NOT be in the plan.\n2.  **Use EXACT Filenames**: You MUST use the exact filenames listed above. Do not hallucinate new names (e.g. do not use `style.css` if `styles.css` exists).\n3.  **Flat Architecture**: Maintain the flat structure.\n4.  **Efficiency**: Do not rewrite files unnecessarily.\n5.  **Complexity Limit**: Update MAXIMUM {max_files} files.\n\nReturn **ONLY** a JSON list of objects (same format as creation):\n- `filename`: filename to create or overwrite (e.g. `styles.css`)\n- `instruction`: detailed prompt for the new content of this file.\n- `dependencies`: files this depends on.\n",
        "writer_prompt": "You are an Expert Full-Stack Developer.\n\nTask: Write (or Update) the code for `{filename}`.\n\nContext: {description}\n\nProject Structure:\n{project_structure}\n\n{file_context}\n\n[EXISTING CONTENT of {filename}]\n{current_content}\n[/EXISTING CONTENT]\n\nSpecific Instruction:\n{instruction}\n\nDependencies/Imports:\n{dependencies}\n\nRules:\n- Return ONLY the code.\n- Do not include markdown code blocks (```).\n- IF EXISTING CONTENT IS PROVIDED: You MUST respect it. Do not rewrite functionality unless instructed. Apply the 'Specific Instruction' to the existing code.\n- Ensure it integrates perfectly with the dependencies listed.\n- Use modern syntax.\n- CHECK IMPORTS: If writing HTML, ensure `<link>` and `<script>` tags are included for ALL CSS and JS files listed in the 'Project Structure' above, using simple filenames (e.g. `styles.css`).\n",
        "plan_pending": "Plan created ({count} files). Click 'Proceed' to build. STOP NOW."
    },
    "web_search": {
        "status_searching": "Surfing web: {query}...",
        "error_no_results": "No search results found.",
        "error_search": "Search Error: {error}",
        "context_header": "Search results for: {query}\n\n",
        "context_source": "SOURCE: {title}\n",
        "context_content": "CONTENT: {content}\n",
        "context_content_partial": "CONTENT: (Could not scrape full content) {snippet}\n",
        "context_separator": "---\n",
        "response_format": "[AI_CONTEXT]\n{context}[/AI_CONTEXT]\n\n[SOURCES]\n{sources_json}\n[/SOURCES]",
        "error_generic": "Error: {error}"
    },
    "web_console": {
        "status_reading": "Reading console logs...",
        "error_no_logs": "No console logs found. Has the preview been run?",
        "error_read": "Error reading logs: {error}",
        "status_empty": "Console is empty (no errors or logs).",
        "log_format": "[{type}]{line_info} {msg}",
        "stack_format": "  Stack: {stack}"
    },
    "file_list": {
        "status_listing": "Listing project files...",
        "error_not_found": "No files found. Project directory does not exist yet.",
        "item_format": "  - {rel_path} ({size} bytes)",
        "empty_directory": "No files in project directory.",
        "success_header": "Files in project:\n",
        "error_generic": "Error listing files: {error}"
    },
    "file_reader": {
        "status_reading": "Reading file: {filename}...",
        "error_not_found": "Error: File '{filename}' not found in project '{project_id}'.",
        "content_format": "[Earlier content of {filename} omitted]\n{content}",
        "error_generic": "Error reading file '{filename}': {error}"
    },
    "calendar": {
        "error_date_format": "Error: Invalid date format. Please use ISO 8601 (e.g. 2023-10-27T10:00:00)",
        "success_add": "Event added successfully. UUID: {uuid}",
        "error_add": "Failed to add event.",
        "success_remove": "Event {uuid} removed successfully.",
        "error_remove": "Failed to remove event {uuid}.",
        "success_create": "Calendar '{name}' created successfully with UID {uid}.",
        "error_create": "Failed to create calendar '{name}'.",
        "error_list_date": "Error: Invalid date format. Please use ISO 8601.",
        "error_no_events": "No events found.",
        "events_header": "Found {count} events:",
        "event_format_uid": "- UID: {uid}",
        "event_format_summary": "  Summary: {summary}",
        "event_format_start": "  Start: {start}",
        "event_format_end": "  End: {end}",
        "error_no_calendars": "No calendars found.",
        "calendars_header": "Available Calendars:",
        "calendar_format_name": "- Name: {name}",
        "calendar_format_uid": "  UID: {uid}",
        "calendar_format_color": "  Color: {color}"
    },
    "current_time": {
        "format": "%Y-%m-%d %H:%M:%S"
    },
    "ui": {
        "plan_approval_message": "Plan approved. Proceed with the build using action='execute'.",
        "spinner": {
            "thinking": "Thinking...",
            "generating": "Executing tools...",
            "completed": "âœ“ Task completed"
        }
    }
}